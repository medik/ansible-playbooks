--- # Conf to initiate a newly installed laptop
- hosts: localhost
  become: True
  become_method: sudo
  tasks:
        # TODO: install dropbox, docker, chrome and matlab

        - name: adding spotify key
          apt_key: keyserver='hkp://keyserver.ubuntu.com:80' id='BBEBDCB318AD50EC6865090613B00F1FD2C19886'

        - name: adding spotify repo
          apt_repository: state=present repo='deb http://repository.spotify.com stable non-free'

        - name: add numix repo
          apt_repository: state=present repo='ppa:numix/ppa'

        - name: adding Dropbox key
          apt_key: keyserver='pgp.mit.edu' id='5044912E'


        - name: add dropbox repo
          apt_repository: state=present repo='deb http://linux.dropbox.com/ubuntu {{ ansible_lsb.codename }} main'

        - name: install stuff
          apt:  name={{item}} state=installed update_cache=yes
          with_items:
              - git
              - spotify-client
              - zsh
              - texlive-full
              - emacs
              - yaml-mode
              - vim
              - dropbox
              - haskell-platform
              - conky
              - numix-gtk-theme
              - numix-icon-theme-circle
              - numix-folders
              - fonts-hack-otf
              - fonts-hack-ttf

- hosts: localhost
  tasks:
        - name: create dirs
          file: path=/home/medik/{{ item }} state=directory
          with_items:
              - bin
              - dev
              - pics
              - music
              - downloads

        - name: install dotfiles 
          git: repo=git@github.com:medik/dotfiles.git dest=/home/medik/dev/dotfiles accept_hostkey=True key_file=~/.ssh/id_rsa

        - name: bootstrap dotfiles
          script: /home/medik/dev/dotfiles/bootstrap.sh
